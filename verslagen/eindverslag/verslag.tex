\documentclass{article}
\usepackage{graphicx} 
\usepackage[english]{babel}
\newcommand\tab[1][1cm]{\hspace*{#1}}
\usepackage{cite}
\usepackage[skip=2pt]{caption}
\graphicspath{ {resources/} } 
\usepackage{hyperref}
\usepackage{color}
\usepackage{tabularx,ragged2e}
\usepackage{float}
\usepackage{mathtools}
\newcolumntype{C}{>{\Centering\arraybackslash}X} % centered "X" column
\begin{document}
\sffamily
\begin{titlepage}
  \centering
    \vfill
    {\bfseries\Huge
      Tinlab Machine Learning \\
      Groepsverslag
        \vskip2cm
      }
      {\bfseries\Large
      	Thomas Alakopsa\\
      	{ \bfseries\normalsize
      	0911723\\
      	}
      }
      {\bfseries\Large
      	Alex de Ridder\\
      	{ \bfseries\normalsize
      	0937558\\
      	}
      }
      {
        \bfseries\normalsize
        \vskip2cm
        \today
    }    
    \vfill
    \includegraphics[width=4cm]{logohr.png}
    \vfill
    \vfill
\end{titlepage}
\newpage

\section{Samenvatting}
Voor Tinlab Machine Learning moest een controller worden gemaakt voor het computer programma Torcs. Om dit te realiseren is onderzoek gedaan in Machine Learning principes. Dit onderzoek heeft geleid tot een netwerk dat gemaakt is met de Java library Encog. Dit netwerk kan een auto in Torcs op elk parcours 
van start tot finish brengen zonder dat deze botst. Zelfs met de "Noicy sensoren" is dit nog niet voorgekomen. 

\section{Inleiding}
Voor Tinlab Machine Learning wordt de verworven kennis toegepast door een intelligente controller te maken voor race simulatie Torcs. In plaats van zelf aan de knoppen te zitten en de auto te besturen, zal er een programma geschreven worden die aan de hand van getrainde modellen en binnenkomende data zelfstandig de auto bestuurd. 


\section{Projectopzet}
Er wordt tijdens dit project gebruik gemaakt van Agile. Het werk word verdeelt in kleine opdrachten die afgemaakt moeten worden in een periode van twee weken. Voordat de kleine opdrachten worden gemaakt, is er een algemene planning ndoig, de eerste draft is in section \ref{eerste-draft} te vinden. De Uiteindelijke gerealiseerde planning staat in bijlage \ref{uiteind-plan}.\\\\
Om de code en verslagen op te slaan van dit project gebruiken wij Github, in bijlage \ref{commitlog} is de log te vinden van de commits. Alle verslagen worden lokaal geschreven in Latex en als de taak klaar is gepusht op Github.

\subsection{Algemene planning}
\label{eerste-draft}
\begin{table}[h!]
\begin{tabularx}{\textwidth}{l r r}
 \textbf{Taak} & \textbf{Planning(week)}  \\ \hline
 Requirements & 1 \\
 Testplan & 2  \\
 Persoonlijk verslag & 6 \\
 Onderzoek controller & 4 \\
 Eerste versie controller & 6  \\
 Testen en verbeteren & 7  \\
 Groepsverslag controller & 7  \\
 Reflectieverslag & 8  \\
\end{tabularx}
\end{table}

\newpage

\subsection*{Product backlog}

\begin{table}[h]
\begin{tabularx}{\textwidth}{l C}
 \textbf{Prioriteit} & \textbf{User story}\\ \hline
 Must & Als projectlid, neem ik deel aan de boekenclub gehost bij klasgenoten, 
zodat ikmeer informatie over Machine Learning verkrijg\\ \hline
 Must & Als projectlid, host ik een boekenclub voor klasgenoten over een thema binnen de AI, zodat ik meer informatie over Machine Learning leer en uitdeel\\\hline
Must & Als project lid, maak ik een persoonlijk verslag, over de wekelijkse geleerde stof en zelfopgedane kennis, zodat ik meer informatie over Machine Learning verkijg.   \\\hline
 Must & Als projectlid, schrijf ik een ethische verantwoording, zodat er een ethisch product wordt geleverd.   \\\hline
 Must & Als projectlid, wil ik een controller trainen, die een auto rijdt in het computerprogramma torcs, zodat het vak behaald kan worden \\\hline
Should have & Als project lid, train ik een netwerk dat geen schade rijdt, omdat een controller die niet crashed goed getrained is. \\\hline
Should have & Als project lid, wil ik veel verschillende soorten netwerken trainen, zodat we veel netwerken met elkaar kunnen vergelijken en een conclusie kunnen trekken over welke eigenschappen een postieve of negatieve invloed hebben. \\
\end{tabularx}
\end{table} 
 
\subsection*{Eisen controller}
\begin{itemize}
\item Er moet snel de baan aflegt worden (50 km/u gaan over heel de baan is dus niet goed.)
\item Getraind worden door een van de AI technieken
\item Neurale network is getrained met de gegeven train data
\item Voorafgesteld doel halen (Start - Finish)
\item Er moet zo weinig mogelijke schade aan de auto zitten
\end{itemize}

\pagebreak
\pagebreak
\input{vooronderzoek.tex}
\pagebreak
\section{Methode}
Aan het begin van het project zijn meerdere datasets gemaakt door de input en output te loggen van een al goed rijdend systeem. Deze datasets zullen gebruikt worden om het neurale netwerk te trainen en/of testen.\\\\ 
Voor communicatie met de "Torcs server" kan er gebruik gemaakt worden van een client in Java of C++. De Java client heeft de voorkeur, met als voornaamste reden dat er op github~\cite{java-client} een opzet te vinden is om een Neural Netwerk te schrijven in de taal java. Deze versie maakt gebruik van een algoritme, dat niet door Machine Learning is gemaakt. \\\\
Het eindproduct zal een neuraal netwerk zijn dat getraind is door middel van een dataset en verifi\"erd door andere datasets. Aanpassingen in de instellingen van het neurale netwerk zullen uiteindelijk leiden tot het beste programma. Het neurale netwerk zal tijdens het trainen bij bepaalde iteraties opgeslagen worden en bij vroegtijdig stopzetten kan de training ook weer hervat worden, vanaf de laatst opgeslagen iteratie. \\\\
Het getrainde neurale netwerk kan worden geverifi\"erd worden op twee manieren, namelijk met de trainingsets of door het \textit{live} te runnen op een baan. Bij het het live runnen is duidelijk te zien hoe het neurale netwerk reageert op bochten. In de resultaten zal dan het verband uitgelegd worden tussen de instellingen van het neurale netwerk en de real-time uitvoering.  Meer informatie hierover is te vinden in het testplan, wat wij ook zullen uitvoeren, zie bijlage \ref{testplan}. \\\\
Java is gekozen als taal om het neurale netwerk te trainen, om dit te maken is een library nodig. Na wat googlen kwamen we op twee opties, de java library Encog gebruiken(Link toevoegen) of een andere taal gebruiken en deze koppelen aan de client van Elvira door een UDP verbinding. De laatste optie zal het meeste werk kosten, dus er is gekozen om eerst te kijken wat Encog voor Neuraal Netwerk opleverd. 
\\\\
Trainen en cree\"eren van het netwerk moet gemakkelijk kunnen op een server, zodat beide projectgenoten bij de training kunnen komen. Dit kan door middel van een jar file, deze jar file en de datasets zijn als enige nodig om een neuraal netwerk te genereren en trainen.
\pagebreak
\section{Resultaten}
Voor all de neuralnetwerken die er getrained zijn is er een standaard scoring methode gebruikt. Elke netwerk is getest op 3 verschillende race banen.
\begin{itemize}
\item Aalborg
\item Alpine 1
\item Alpine 2
\end{itemize}
Dit zijn alle 3 asphalt banen. Die een goede mix zijn van verschillende soorten bochten, rechten stukken en hellingen zodat de netwerken getest worden op alle benodigde kwaliteiten. De resultaten worden genoteerd in hoeveel tijd het gekost heeft om 1 ronde te rijden, de maximum snelheid die het netwerk berijkt heeft, de schade die het heeft opgelopen en welke verzie van de stuk methode is gebruikt. All deze resultaten staan hier gedocumenteerd \ref{testresulaten}.
%Uitleg geven over de testresulaten, zie bijlage \ref{testresulaten}. 

Uit deze resultaten kwam het all heel snel naar voren dat de error waarde van een netwerk niet een goed refference punt is voor het meten van succes. Er zijn netwerken geweest met een zeer lage error waarde die zeer slecht presatie geleverd hebben, en er waren netwerken met een hoge error waarde die juist wel een goede prestatie hebben geleverd. De meesten nerwerken die hebben getrained doen het het beste na de 3000/5000 trainingen. Voor dit aantal training heeft het netwerk niet genoeg geleerd er worden er erg veel fouten gemaakt. Na de 5000 trainingen gaat de presatie weer omlaag, waarschijnlijk door overfitting.
%Uitleg waarom we niks gedaan hebben met de errorwaarde tests.

Omdat de data die gebruikt word voor het sturen van de torcs auto tussen de -1 en 1 zit is het verstandig om gebruik te maken van de tanh functie. Omdat tanh alle reÃ«el getal tussen de -1 en 1 kan hebben, dus waarden zoals -0.875 ... en 0.132. Dit zorgt ervoor dat de uitkomst van een neuron niet een simple een ja of nee is maar veel complexer getal dat van alles en nog wat kan betekenen. Nu als er een kleine verandering plaatsvind in de weights of biases van het neurale netwerk zullen deze kleine verandering ook te vinden worden in de output uiteindelijk zorgt dit ervoor dat het neurale netwerk zelf kan leren.\\\\
%Uitleg waarom alleen Tanh  waardes


%Uitleg waarom we uiteindelijk alleen Encog hebben gebruikt (Doet Alex).

Uit de resultaten bleken dat er een aatal netwerken waaren die boven de anderen uitstaken:
\begin{itemize}
\item 2 laags netwerk: eerste laag van 100 neurons, tweede laag van 40 neurons
\item 3 laags netwerk: eerste laag van 100 neurons, tweede laag van 60 en een derde laag van 40 neurons.
\item 2 laags netwerk: eerste laag van 200 neurons, tweede laag van 40 neurons. 
\end{itemize}
Met deze neurale netwerken zijn we nog veder gaan testen op ook andere racetracks dan de 3 waar ze allemaal systematies op getest zijn.
%Uiteindelijke keuze om 2 netwerken volledig handmatig te testen en vergelijken. 


%Gedeelte over de stuck methode, hoe die is gemaakt. Uitleg erover. (Doet Alex)
		
%Uiteindelijke keuze voor beste netwerk. (Alex )

\textbf{wat kan beter}
We waren te laat begonnen met een goed testplan op te zetten. Vooral aan een structuur over hoe we de presatatie kunnen beoordelen van de verschillende netwerken. \\\\

\textbf{wat ging goed}
we hadden daily standup meetings op school, hierdoor was het altijd duidelijk wat we moesten doen, hoe het met de andere persoon ging en wat voor werk er was vericht de dag daavoor.



%Wat hadden we beter kunnen doen, wat kan er verbeterd worden. 
\section{Conclusie}
%Samenvatting Resultaten en wat er nog verbeterd kan worden
\pagebreak
\section{Bijlages}
\subsection{Architectuurontwerp}
%Alex maakt een mooi plaatje
\input{bijlages/testplan.tex}
\pagebreak
\input{bijlages/scoreboard.tex}

\pagebreak
\subsection{Planning}
\label{uiteind-plan}
\begin{table}[h!]
\begin{tabular}{lrr}
 \textbf{Taak} & \textbf{Planning} & \textbf{Opgeverd} \\ \hline
 Requirements & 1 & 5 \\
 Testplan & 2 & 6 \\
 Persoonlijk verslag & 6 & 8 \\
 Onderzoek controller & 4 & 5 (\textit{np}) \\
 Eerste versie controller & 6 & 8 \\
 Testen en verbeteren & 7 & 7 (np) \\
 Tweede versie controller & 6 & 7 (\textit{np}) \\
 Groepsverslag controller & 7 & 7 (\textit{np}) \\
 Reflectieverslag & 8 & 8 (\textit{np})  \\
\end{tabular}
\caption{Uiteindelijke gerealiseerde planning in weken. \textit{np = nieuwe periode}}
\end{table}
\newpage
\input{bijlages/commitlog.tex}
\bibliographystyle{plain}
%\bibliography{IEEEabrv,references}
\bibliography{references}
\end{document}
